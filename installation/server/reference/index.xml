<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Vela – Reference</title><link>https://go-vela.github.io/docs/installation/server/reference/</link><description>Recent content in Reference on Vela</description><generator>Hugo -- gohugo.io</generator><language>en</language><atom:link href="https://go-vela.github.io/docs/installation/server/reference/index.xml" rel="self" type="application/rss+xml"/><item><title>Installation: Settings</title><link>https://go-vela.github.io/docs/installation/server/reference/settings/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://go-vela.github.io/docs/installation/server/reference/settings/</guid><description>
&lt;p>Platform Administrators can update certain properties during runtime to change how the platform behaves in real time.&lt;/p>
&lt;p>The following properties are available to be updated:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference#vela_repo_allowlist">&lt;code>VELA_REPO_ALLOWLIST&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference#vela_schedule_allowlist">&lt;code>VELA_SCHEDULE_ALLOWLIST&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference#vela_max_template_depth">&lt;code>VELA_MAX_TEMPLATE_DEPTH&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference#vela_compiler_starlark_exec_limit">&lt;code>VELA_COMPILER_STARLARK_EXEC_LIMIT&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference#vela_clone_image">&lt;code>VELA_CLONE_IMAGE&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>The following options are used to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Required&lt;/th>
&lt;th style="text-align: left">Default&lt;/th>
&lt;th style="text-align: left">Environment Variables&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>settings-refresh-interval&lt;/code>&lt;/td>
&lt;td style="text-align: left">the interval at which the server syncs with the database&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>5s&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_PLATFORM_SETTINGS_REFRESH_INTERVAL&lt;/code>, &lt;code>VELA_SETTINGS_REFRESH_INTERVAL&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
For more information on how the runtime properties are consumed, please see the &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/">server reference&lt;/a>.
&lt;/div>
&lt;h2 id="permissions">Permissions&lt;/h2>
&lt;p>This functionality only exists for &lt;a href="https://go-vela.github.io/docs/docs/usage/roles/">Platform Administrators&lt;/a>.&lt;/p>
&lt;h2 id="usage">Usage&lt;/h2>
&lt;h3 id="initializing">Initializing&lt;/h3>
&lt;p>The server will ensure shared settings are first initialized using the variables provided in the environment. For more information on how the runtime properties are configured, please see the &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/">server reference&lt;/a>.&lt;/p>
&lt;p>On subsequent server startups, the properties controlled by the &lt;code>settings&lt;/code> component will be retrieved from the database.&lt;/p>
&lt;p>If the database settings record is deleted then the server will fail. On the next startup the server will re-initialize the settings record using the values provided in the environment.&lt;/p>
&lt;h3 id="server-synchronization">Server Synchronization&lt;/h3>
&lt;p>The server will keep its own &lt;code>settings&lt;/code> in sync with the database according to the &lt;code>settings-refresh-interval&lt;/code> set in the environment.&lt;/p>
&lt;h3 id="viewing-and-updating-properties">Viewing and Updating Properties&lt;/h3>
&lt;p>To view or update settings via the user interface, log into your Vela instance and click the &lt;code>site admin&lt;/code> link in the top right corner or navigate to &lt;code>https://vela-server.example.com/admin/settings&lt;/code>.&lt;/p>
&lt;p>Check the &lt;a href="https://go-vela.github.io/docs/docs/reference/cli/settings">CLI docs&lt;/a> for instructions on modifying runtime properties via the command line.&lt;/p>
&lt;p>Updated properties will propagate to all server instances depending on the &lt;code>settings-refresh-interval&lt;/code> set in the environment on startup.&lt;/p>
&lt;h3 id="restoring-default-properties">Restoring Default Properties&lt;/h3>
&lt;p>The &lt;a href="https://go-vela.github.io/docs/docs/reference/api/admin/settings/restore">&lt;code>DELETE /api/v1/admin/settings&lt;/code>&lt;/a> API endpoint can be used to &amp;ldquo;restore&amp;rdquo; the server to its original environment-provided configurations. Acting as a way for platform admins to undo any current modifications to the platform without restarting or modifying the database.&lt;/p></description></item><item><title>Installation: Compiler</title><link>https://go-vela.github.io/docs/installation/server/reference/compiler/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://go-vela.github.io/docs/installation/server/reference/compiler/</guid><description>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
The compiler is embedded directly in the server and can only be accessed through the server.
&lt;/div>
&lt;p>This component is responsible for transforming a &lt;a href="https://go-vela.github.io/docs/docs/tour/">pipeline&lt;/a> into an executable representation for the &lt;a href="https://go-vela.github.io/docs/docs/installation/worker/">worker&lt;/a>.&lt;/p>
&lt;p>During the transformation, it will retrieve &lt;a href="https://go-vela.github.io/docs/docs/tour/templates/">templates&lt;/a> from one or more registries depending on the pipeline configuration.&lt;/p>
&lt;p>By default, Vela will use &lt;a href="https://github.com/">GitHub&lt;/a> as a registry for fetching templates, but you can configure additional registries as well.&lt;/p>
&lt;p>However, to fetch templates from a private organization or repository on GitHub, you need to provide a token to the compiler.&lt;/p>
&lt;p>Additionally, the compiler can send pipelines to an external endpoint, to be modified, based off custom configuration.&lt;/p>
&lt;p>This modification endpoint can be used to perform any number of customizations to all workloads created by the system.&lt;/p>
&lt;p>Some examples of what the modification endpoint can do include, but are not limited to:&lt;/p>
&lt;ul>
&lt;li>injecting or updating the configuration for &lt;a href="https://go-vela.github.io/docs/docs/tour/secrets/">secrets&lt;/a> in the pipeline&lt;/li>
&lt;li>injecting or updating the configuration for &lt;a href="https://go-vela.github.io/docs/docs/tour/services/">services&lt;/a> in the pipeline&lt;/li>
&lt;li>injecting or updating the configuration for &lt;a href="https://go-vela.github.io/docs/docs/tour/stages/">stages&lt;/a> in the pipeline&lt;/li>
&lt;li>injecting or updating the configuration for &lt;a href="https://go-vela.github.io/docs/docs/tour/steps/">steps&lt;/a> in the pipeline&lt;/li>
&lt;/ul>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>The following options are used to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Required&lt;/th>
&lt;th style="text-align: left">Default&lt;/th>
&lt;th style="text-align: left">Environment Variables&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>clone-image&lt;/code>&lt;/td>
&lt;td style="text-align: left">default clone image to use for Vela injected clone step&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>target/vela-git&lt;/code> (1)&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_CLONE_IMAGE&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>github-driver&lt;/code>&lt;/td>
&lt;td style="text-align: left">enables using Github or GitHub Enterprise Server as a registry for templates&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>COMPILER_GITHUB&lt;/code>&lt;br>&lt;code>VELA_COMPILER_GITHUB&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>github-url&lt;/code>&lt;/td>
&lt;td style="text-align: left">fully qualified url to GitHub or GitHub Enterprise Server for templates&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>COMPILER_GITHUB_URL&lt;/code>&lt;br>&lt;code>VELA_COMPILER_GITHUB_URL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>github-token&lt;/code>&lt;/td>
&lt;td style="text-align: left">token used for authentication when fetching registry templates&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>COMPILER_GITHUB_TOKEN&lt;/code>&lt;br>&lt;code>VELA_COMPILER_GITHUB_TOKEN&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>modification-addr&lt;/code>&lt;/td>
&lt;td style="text-align: left">fully qualified url to endpoint for modifying pipelines&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>MODIFICATION_ADDR&lt;/code>&lt;br>&lt;code>VELA_MODIFICATION_ADDR&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>modification-retries&lt;/code>&lt;/td>
&lt;td style="text-align: left">number of times to resend failed requests to the modification endpoint&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>5&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>MODIFICATION_RETRIES&lt;/code>&lt;br>&lt;code>VELA_MODIFICATION_RETRIES&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>modification-secret&lt;/code>&lt;/td>
&lt;td style="text-align: left">authenticates communication between compiler and the modification endpoint&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>MODIFICATION_SECRET&lt;/code>&lt;br>&lt;code>VELA_MODIFICATION_SECRET&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>modification-timeout&lt;/code>&lt;/td>
&lt;td style="text-align: left">timeout for requests sent to the modification endpoint&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>8s&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>MODIFICATION_TIMEOUT&lt;/code>&lt;br>&lt;code>VELA_MODIFICATION_TIMEOUT&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>max-template-depth&lt;/code>&lt;/td>
&lt;td style="text-align: left">max depth for calling nested templates during compilation&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>3&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>MAX_TEMPLATE_DEPTH&lt;/code>&lt;br>&lt;code>VELA_MAX_TEMPLATE_DEPTH&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>compiler-starlark-exec-limit&lt;/code>&lt;/td>
&lt;td style="text-align: left">execution step limit for compiling starlark pipelines&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>7500&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>COMPILER_STARLARK_EXEC_LIMIT&lt;/code>&lt;br>&lt;code>VELA_COMPILER_STARLARK_EXEC_LIMIT&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;em>(1) this will be the latest available, tagged release of &lt;code>target/vela-git&lt;/code> at the time the server component is released&lt;/em>&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
For more information on these configuration options, please see the &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/">server reference&lt;/a>.
&lt;/div>
&lt;h2 id="drivers">Drivers&lt;/h2>
&lt;p>The following drivers are available to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>github&lt;/code>&lt;/td>
&lt;td style="text-align: left">uses GitHub or GitHug Enterprise Server as a template registry&lt;/td>
&lt;td style="text-align: left">&lt;a href="https://docs.github.com/en/enterprise-server/admin/overview/system-overview">https://docs.github.com/en/enterprise-server/admin/overview/system-overview&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="github">GitHub&lt;/h3>
&lt;p>From the &lt;a href="https://github.com/about/">GitHub official website&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>GitHub is where the world builds software. Millions of developers and companies build, ship, and maintain their software on GitHub—the largest and most advanced development platform in the world.&lt;/p>
&lt;/blockquote>
&lt;p>The below configuration displays an example of starting the Vela server that will use a GitHub Server as a template registry:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-diff" data-lang="diff">&lt;span style="display:flex;">&lt;span>$ docker run \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --detach=true \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_ADDR=https://vela-server.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_COMPILER_GITHUB=true \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_COMPILER_TOKEN=&amp;lt;github-personal-access-token&amp;gt; \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_COMPILER_URL=https://github.com \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">&lt;/span> --env=VELA_DATABASE_ENCRYPTION_KEY=&amp;lt;encryption-key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_QUEUE_DRIVER=redis \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_QUEUE_ADDR=redis://&amp;lt;password&amp;gt;@&amp;lt;hostname&amp;gt;:&amp;lt;port&amp;gt;/&amp;lt;database&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_PORT=443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SECRET=&amp;lt;shared-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SERVER_PRIVATE_KEY=&amp;lt;private_key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_CLIENT=&amp;lt;oauth-client-id&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_SECRET=&amp;lt;oauth-client-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_WEBUI_ADDR=https://vela.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --name=server \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=80:80 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=443:443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --restart=always \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> target/vela-server:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
&lt;p>This GitHub configuration is enabled by default and is not necessary to provide in order for Vela to operate.&lt;/p>
&lt;p>However, this configuration will enable you to fetch templates from a private organization or repository on GitHub.&lt;/p>
&lt;/div>
&lt;h3 id="github-enterprise-server">GitHub Enterprise Server&lt;/h3>
&lt;p>From the &lt;a href="https://docs.github.com/en/enterprise-server/admin/overview/system-overview">GitHub Enterprise official website&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>GitHub Enterprise Server is your organization&amp;rsquo;s private copy of GitHub contained within a virtual appliance, hosted on premises or in the cloud, that you configure and control.&lt;/p>
&lt;/blockquote>
&lt;p>The below configuration displays an example of starting the Vela server that will use a GitHub Enterprise Server as a template registry:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-diff" data-lang="diff">&lt;span style="display:flex;">&lt;span>$ docker run \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --detach=true \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_ADDR=https://vela-server.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_COMPILER_GITHUB=true \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_COMPILER_TOKEN=&amp;lt;github-personal-access-token&amp;gt; \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_COMPILER_URL=https://git.example.com \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">&lt;/span> --env=VELA_DATABASE_ENCRYPTION_KEY=&amp;lt;encryption-key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_QUEUE_DRIVER=redis \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_QUEUE_ADDR=redis://&amp;lt;password&amp;gt;@&amp;lt;hostname&amp;gt;:&amp;lt;port&amp;gt;/&amp;lt;database&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_PORT=443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SECRET=&amp;lt;shared-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SERVER_PRIVATE_KEY=&amp;lt;private_key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_CLIENT=&amp;lt;oauth-client-id&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_SECRET=&amp;lt;oauth-client-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_WEBUI_ADDR=https://vela.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --name=server \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=80:80 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=443:443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --restart=always \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> target/vela-server:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Installation: Database</title><link>https://go-vela.github.io/docs/installation/server/reference/database/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://go-vela.github.io/docs/installation/server/reference/database/</guid><description>
&lt;p>This component is responsible for integrating with a database system based off the configuration provided.&lt;/p>
&lt;p>The database system is used by Vela for storing application &lt;a href="https://en.wikipedia.org/wiki/Data_at_rest">data at rest&lt;/a>.&lt;/p>
&lt;p>This data is an organized collection of information necessary for the platform to operate.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
Any sensitive data stored in the database will be encrypted using the &lt;a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">Advanced Encryption Standard (AES)&lt;/a>.
&lt;/div>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>The following options are used to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Required&lt;/th>
&lt;th style="text-align: left">Default&lt;/th>
&lt;th style="text-align: left">Environment Variables&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.addr&lt;/code>&lt;/td>
&lt;td style="text-align: left">full connection string to the database&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>sqlite3&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_ADDR&lt;/code>&lt;br>&lt;code>VELA_DATABASE_ADDR&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.driver&lt;/code>&lt;/td>
&lt;td style="text-align: left">type of client to control and operate the database&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>vela.sqlite&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_DRIVER&lt;/code>&lt;br>&lt;code>VELA_DATABASE_DRIVER&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.compression.level&lt;/code>&lt;/td>
&lt;td style="text-align: left">level of compression for logs stored in the database&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>3&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_COMPRESSION_LEVEL&lt;/code>&lt;br>&lt;code>VELA_DATABASE_COMPRESSION_LEVEL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.connection.idle&lt;/code>&lt;/td>
&lt;td style="text-align: left">maximum number of idle connections to the database&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>2&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_CONNECTION_IDLE&lt;/code>&lt;br>&lt;code>VELA_DATABASE_CONNECTION_IDLE&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.connection.life&lt;/code>&lt;/td>
&lt;td style="text-align: left">duration of time a connection is reusable&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>30m&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_CONNECTION_LIFE&lt;/code>&lt;br>&lt;code>VELA_DATABASE_CONNECTION_LIFE&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.connection.open&lt;/code>&lt;/td>
&lt;td style="text-align: left">maximum number of open connections to the database&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>0&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_CONNECTION_OPEN&lt;/code>&lt;br>&lt;code>VELA_DATABASE_CONNECTION_OPEN&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.encryption.key&lt;/code>&lt;/td>
&lt;td style="text-align: left">AES-256 key for encrypting/decrypting values in the database&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_ENCRYPTION_KEY&lt;/code>&lt;br>&lt;code>VELA_DATABASE_ENCRYPTION_KEY&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.skip_creation&lt;/code>&lt;/td>
&lt;td style="text-align: left">skips the creation of tables and indexes in the database&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_SKIP_CREATION&lt;/code>&lt;br>&lt;code>VELA_DATABASE_SKIP_CREATION&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.log.level&lt;/code>&lt;/td>
&lt;td style="text-align: left">log level for database&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>warn&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_LOG_LEVEL&lt;/code> &lt;br> &lt;code>VELA_DATABASE_LOG_LEVEL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.log.show_sql&lt;/code>&lt;/td>
&lt;td style="text-align: left">show sql query in logs&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_LOG_SHOW_SQL&lt;/code> &lt;br> &lt;code>VELA_DATABASE_LOG_SHOW_SQL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.log.skip_notfound&lt;/code>&lt;/td>
&lt;td style="text-align: left">skip logging not found errors&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_LOG_SKIP_NOTFOUND&lt;/code> &lt;br> &lt;code>VELA_DATABASE_LOG_SKIP_NOTFOUND&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>database.log.slow_threshold&lt;/code>&lt;/td>
&lt;td style="text-align: left">queries higher than this value are considered slow and logged&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>200ms&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>DATABASE_LOG_SLOW_THRESHOLD&lt;/code> &lt;br> &lt;code>VELA_DATABASE_LOG_SLOW_THRESHOLD&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
For more information on these configuration options, please see the &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/">server reference&lt;/a>.
&lt;/div>
&lt;h2 id="drivers">Drivers&lt;/h2>
&lt;p>The following drivers are available to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>postgres&lt;/code>&lt;/td>
&lt;td style="text-align: left">uses a PostgreSQL database for storing data at rest&lt;/td>
&lt;td style="text-align: left">&lt;a href="https://www.postgresql.org/">https://www.postgresql.org/&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>sqlite3&lt;/code>&lt;/td>
&lt;td style="text-align: left">uses a SQLite database for storing data at rest&lt;/td>
&lt;td style="text-align: left">&lt;a href="https://www.sqlite.org/">https://www.sqlite.org/&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="postgres">Postgres&lt;/h3>
&lt;p>From the &lt;a href="https://www.postgresql.org/">PostgreSQL official website&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>PostgreSQL is a powerful, open source object-relational database system with over 30 years of active development that has earned it a strong reputation for reliability, feature robustness, and performance.&lt;/p>
&lt;/blockquote>
&lt;p>The below configuration displays an example of starting the Vela server that will connect to a Postgres database:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-diff" data-lang="diff">&lt;span style="display:flex;">&lt;span>$ docker run \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --detach=true \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_ADDR=https://vela-server.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_DATABASE_DRIVER=postgres \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_DATABASE_ADDR=postgres://&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;@&amp;lt;hostname&amp;gt;:&amp;lt;port&amp;gt;/&amp;lt;database&amp;gt; \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">&lt;/span> --env=VELA_DATABASE_ENCRYPTION_KEY=&amp;lt;encryption-key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_QUEUE_DRIVER=redis \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_QUEUE_ADDR=redis://&amp;lt;password&amp;gt;@&amp;lt;hostname&amp;gt;:&amp;lt;port&amp;gt;/&amp;lt;database&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_PORT=443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SECRET=&amp;lt;shared-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SERVER_PRIVATE_KEY=&amp;lt;private_key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_CLIENT=&amp;lt;oauth-client-id&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_SECRET=&amp;lt;oauth-client-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_WEBUI_ADDR=https://vela.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --name=server \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=80:80 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=443:443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --restart=always \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> target/vela-server:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="sqlite3">Sqlite3&lt;/h3>
&lt;p>From the &lt;a href="https://www.sqlite.org/">Sqlite official website&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>SQLite is a C-language library that implements a small, fast, self-contained, high-reliability, full-featured, SQL database engine. SQLite is the most used database engine in the world. SQLite is built into all mobile phones and most computers and comes bundled inside countless other applications that people use every day.&lt;/p>
&lt;/blockquote>
&lt;p>The below configuration displays an example of starting the Vela server that will connect to a Sqlite database:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-diff" data-lang="diff">&lt;span style="display:flex;">&lt;span>$ docker run \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --detach=true \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_ADDR=https://vela-server.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_DATABASE_DRIVER=sqlite3 \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_DATABASE_ADDR=vela.sqlite \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">&lt;/span> --env=VELA_DATABASE_ENCRYPTION_KEY=&amp;lt;encryption-key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_QUEUE_DRIVER=redis \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_QUEUE_ADDR=redis://&amp;lt;password&amp;gt;@&amp;lt;hostname&amp;gt;:&amp;lt;port&amp;gt;/&amp;lt;database&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_PORT=443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SECRET=&amp;lt;shared-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SERVER_PRIVATE_KEY=&amp;lt;private_key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_CLIENT=&amp;lt;oauth-client-id&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_SECRET=&amp;lt;oauth-client-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_WEBUI_ADDR=https://vela.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --name=server \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=80:80 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=443:443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --restart=always \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> target/vela-server:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
This Sqlite configuration is enabled by default and is not necessary to provide in order for Vela to operate.
&lt;/div></description></item><item><title>Installation: Queue</title><link>https://go-vela.github.io/docs/installation/server/reference/queue/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://go-vela.github.io/docs/installation/server/reference/queue/</guid><description>
&lt;p>This component is responsible for integrating with a queue system based off the configuration provided.&lt;/p>
&lt;p>The queue system is used by the Vela server for pushing workloads that will be run by a &lt;a href="https://go-vela.github.io/docs/docs/installation/worker/">worker&lt;/a>.&lt;/p>
&lt;p>Workloads published to the queue are managed with a &lt;a href="https://en.wikipedia.org/wiki/FIFO_(computing_and_electronics)">first in, first out (FIFO)&lt;/a> strategy.&lt;/p>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>The following options are used to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Required&lt;/th>
&lt;th style="text-align: left">Default&lt;/th>
&lt;th style="text-align: left">Environment Variables&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>queue.addr&lt;/code>&lt;/td>
&lt;td style="text-align: left">full connection string to the queue&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>QUEUE_ADDR&lt;/code>&lt;br>&lt;code>VELA_QUEUE_ADDR&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>queue.cluster&lt;/code>&lt;/td>
&lt;td style="text-align: left">configures the client for a queue cluster&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>QUEUE_CLUSTER&lt;/code>&lt;br>&lt;code>VELA_QUEUE_CLUSTER&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>queue.driver&lt;/code>&lt;/td>
&lt;td style="text-align: left">type of client to control and operate queue&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>QUEUE_DRIVER&lt;/code>&lt;br>&lt;code>VELA_QUEUE_DRIVER&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>queue.pop.timeout&lt;/code>&lt;/td>
&lt;td style="text-align: left">timeout for requests that pop items off the queue&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>60s&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>QUEUE_POP_TIMEOUT&lt;/code>&lt;br>&lt;code>VELA_QUEUE_POP_TIMEOUT&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>queue.routes&lt;/code>&lt;/td>
&lt;td style="text-align: left">unique channels or topics for pushing workloads&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>[ vela ]&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>QUEUE_ROUTES&lt;/code>&lt;br>&lt;code>VELA_QUEUE_ROUTES&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>queue.private-key&lt;/code>&lt;/td>
&lt;td style="text-align: left">private key for signing items prior to push&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>QUEUE_PRIVATE_KEY&lt;/code>&lt;br>&lt;code>VELA_QUEUE_PRIVATE_KEY&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>queue.public-key&lt;/code>&lt;/td>
&lt;td style="text-align: left">public key for opening items after popping them off the queue&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>QUEUE_PUBLIC_KEY&lt;/code>&lt;br>&lt;code>VELA_QUEUE_PUBLIC_KEY&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
For more information on these configuration options, please see the &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/">server reference&lt;/a>.
&lt;/div>
&lt;h2 id="drivers">Drivers&lt;/h2>
&lt;p>The following drivers are available to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>redis&lt;/code>&lt;/td>
&lt;td style="text-align: left">uses a Redis queue for managing workloads&lt;/td>
&lt;td style="text-align: left">&lt;a href="https://redis.io/">https://redis.io/&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="redis">Redis&lt;/h3>
&lt;p>From the &lt;a href="https://redis.io/">Redis official website&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache, and message broker. Redis provides data structures such as strings, hashes, lists, sets, sorted sets with range queries, bitmaps, hyperloglogs, geospatial indexes, and streams. Redis has built-in replication, Lua scripting, LRU eviction, transactions, and different levels of on-disk persistence, and provides high availability via Redis Sentinel and automatic partitioning with Redis Cluster.&lt;/p>
&lt;/blockquote>
&lt;p>The below configuration displays an example of starting the Vela server that will connect to a Redis queue:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-diff" data-lang="diff">&lt;span style="display:flex;">&lt;span>$ docker run \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --detach=true \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_ADDR=https://vela-server.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_DATABASE_ENCRYPTION_KEY=&amp;lt;encryption-key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_QUEUE_DRIVER=redis \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_QUEUE_ADDR=redis://&amp;lt;password&amp;gt;@&amp;lt;hostname&amp;gt;:&amp;lt;port&amp;gt;/&amp;lt;database&amp;gt; \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_QUEUE_PRIVATE_KEY=&amp;lt;signing-private-key&amp;gt; \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_QUEUE_PUBLIC_KEY=&amp;lt;signing-public-key&amp;gt; \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">&lt;/span> --env=VELA_PORT=443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SECRET=&amp;lt;shared-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SERVER_PRIVATE_KEY=&amp;lt;private_key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_CLIENT=&amp;lt;oauth-client-id&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_SECRET=&amp;lt;oauth-client-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_WEBUI_ADDR=https://vela.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --name=server \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=80:80 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=443:443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --restart=always \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> target/vela-server:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Installation: Secret</title><link>https://go-vela.github.io/docs/installation/server/reference/secret/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://go-vela.github.io/docs/installation/server/reference/secret/</guid><description>
&lt;p>This component is optional and is responsible for integrating with an external secret system based off the configuration provided.&lt;/p>
&lt;p>The secret system is used by Vela for storing sensitive application &lt;a href="https://en.wikipedia.org/wiki/Data_at_rest">data at rest&lt;/a>.&lt;/p>
&lt;p>By default, Vela will use &lt;a href="https://go-vela.github.io/docs/docs/installation/server/database/">the database&lt;/a> to store the sensitive data if no other secret system is configured.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
Any sensitive data stored in the database will be encrypted using the &lt;a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">Advanced Encryption Standard (AES)&lt;/a>.
&lt;/div>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>The following options are used to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Required&lt;/th>
&lt;th style="text-align: left">Default&lt;/th>
&lt;th style="text-align: left">Environment Variables&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>secret.vault.addr&lt;/code>&lt;/td>
&lt;td style="text-align: left">fully qualified url to the HashiCorp Vault instance&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SECRET_VAULT_ADDR&lt;/code>&lt;br>&lt;code>VELA_SECRET_VAULT_ADDR&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>secret.vault.auth-method&lt;/code>&lt;/td>
&lt;td style="text-align: left">authentication method used to obtain token from the HashiCorp Vault instance&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SECRET_VAULT_AUTH_METHOD&lt;/code>&lt;br>&lt;code>VELA_SECRET_VAULT_AUTH_METHOD&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>secret.vault.aws-role&lt;/code>&lt;/td>
&lt;td style="text-align: left">HashiCorp Vault role used to connect to the auth/aws/login endpoint&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SECRET_VAULT_AWS_ROLE&lt;/code>&lt;br>&lt;code>VELA_SECRET_VAULT_AWS_ROLE&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>secret.vault.driver&lt;/code>&lt;/td>
&lt;td style="text-align: left">enables HashiCorp Vault as a secret engine&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SECRET_VAULT&lt;/code>&lt;br>&lt;code>VELA_SECRET_VAULT&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>secret.vault.prefix&lt;/code>&lt;/td>
&lt;td style="text-align: left">prefix for k/v secrets in the HashiCorp Vault instance&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SECRET_VAULT_PREFIX&lt;/code>&lt;br>&lt;code>VELA_SECRET_VAULT_PREFIX&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>secret.vault.renewal&lt;/code>&lt;/td>
&lt;td style="text-align: left">frequency to renew the token for the HashiCorp Vault instance&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>30m&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SECRET_VAULT_RENEWAL&lt;/code>&lt;br>&lt;code>VELA_SECRET_VAULT_RENEWAL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>secret.vault.token&lt;/code>&lt;/td>
&lt;td style="text-align: left">token required to access the HashiCorp Vault instance&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SECRET_VAULT_TOKEN&lt;/code>&lt;br>&lt;code>VELA_SECRET_VAULT_TOKEN&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>secret.vault.version&lt;/code>&lt;/td>
&lt;td style="text-align: left">version for the k/v backend for the HashiCorp Vault instance&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>2&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SECRET_VAULT_VERSION&lt;/code>&lt;br>&lt;code>VELA_SECRET_VAULT_VERSION&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
For more information on these configuration options, please see the &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/">server reference&lt;/a>.
&lt;/div>
&lt;h2 id="drivers">Drivers&lt;/h2>
&lt;p>The following drivers are available to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>vault&lt;/code>&lt;/td>
&lt;td style="text-align: left">uses a HashiCorp Vault instance for storing sensitive data at rest&lt;/td>
&lt;td style="text-align: left">&lt;a href="https://www.vaultproject.io/">https://www.vaultproject.io/&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="hashicorp-vault">HashiCorp Vault&lt;/h3>
&lt;p>From the &lt;a href="https://www.vaultproject.io/">HashiCorp Vault official website&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>HashiCorp Vault enables you to secure, store and tightly control access to tokens, passwords, certificates, encryption keys for protecting secrets and other sensitive data using a UI, CLI, or HTTP API.&lt;/p>
&lt;/blockquote>
&lt;p>The below configuration displays an example of starting the Vela server that will connect to a HashiCorp Vault instance:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-diff" data-lang="diff">&lt;span style="display:flex;">&lt;span>$ docker run \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --detach=true \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_ADDR=https://vela-server.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_DATABASE_ENCRYPTION_KEY=&amp;lt;encryption-key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_QUEUE_DRIVER=redis \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_QUEUE_ADDR=redis://&amp;lt;password&amp;gt;@&amp;lt;hostname&amp;gt;:&amp;lt;port&amp;gt;/&amp;lt;database&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_PORT=443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SECRET=&amp;lt;shared-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SERVER_PRIVATE_KEY=&amp;lt;private_key&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_SECRET_VAULT=true \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_SECRET_VAULT_ADDR=https://vault.example.com \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_SECRET_VAULT_TOKEN=&amp;lt;vault-token&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">&lt;/span> --env=VELA_SCM_CLIENT=&amp;lt;oauth-client-id&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_SCM_SECRET=&amp;lt;oauth-client-secret&amp;gt; \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_WEBUI_ADDR=https://vela.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --name=server \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=80:80 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --publish=443:443 \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --restart=always \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> target/vela-server:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Installation: SCM</title><link>https://go-vela.github.io/docs/installation/server/reference/scm/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://go-vela.github.io/docs/installation/server/reference/scm/</guid><description>
&lt;p>This component is responsible for integrating with a source control management (SCM) system based off the configuration provided.&lt;/p>
&lt;p>The SCM system is used by Vela for both authentication and authorization of interactions performed within the application.&lt;/p>
&lt;p>&lt;img src="https://go-vela.github.io/docs/docs/installation/server/reference/authentication_workflow.png" alt="Authentication Workflow">&lt;/p>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>The following options are used to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Required&lt;/th>
&lt;th style="text-align: left">Default&lt;/th>
&lt;th style="text-align: left">Environment Variables&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>scm.addr&lt;/code>&lt;/td>
&lt;td style="text-align: left">fully qualified url for the SCM&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>https://github.com&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SCM_ADDR&lt;/code>&lt;br>&lt;code>VELA_SCM_ADDR&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>scm.client&lt;/code>&lt;/td>
&lt;td style="text-align: left">client ID from the generated OAuth application on the SCM&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SCM_CLIENT&lt;/code>&lt;br>&lt;code>VELA_SCM_CLIENT&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>scm.context&lt;/code>&lt;/td>
&lt;td style="text-align: left">message to set in commit status on the SCM&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>continuous-integration/vela&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SCM_CONTEXT&lt;/code>&lt;br>&lt;code>VELA_SCM_CONTEXT&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>scm.driver&lt;/code>&lt;/td>
&lt;td style="text-align: left">type of client to control and operate SCM&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>github&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SCM_DRIVER&lt;/code>&lt;br>&lt;code>VELA_SCM_DRIVER&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>scm.scopes&lt;/code>&lt;/td>
&lt;td style="text-align: left">permission scopes to apply for the OAuth credentials on the SCM&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>[ repo, repo:status, user:email, read:user, read:org ]&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SCM_SCOPES&lt;/code>&lt;br>&lt;code>VELA_SCM_SCOPES&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>scm.secret&lt;/code>&lt;/td>
&lt;td style="text-align: left">client secret from the generated OAuth application on the SCM&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>SCM_SECRET&lt;/code>&lt;br>&lt;code>VELA_SCM_SECRET&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>scm.webhook.addr&lt;/code>&lt;/td>
&lt;td style="text-align: left">url for webhooks on the SCM to send requests to&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">the address of the Vela server (&lt;code>$VELA_ADDR&lt;/code>)&lt;/td>
&lt;td style="text-align: left">&lt;code>SCM_WEBHOOK_ADDR&lt;/code>&lt;br>&lt;code>VELA_SCM_WEBHOOK_ADDR&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
For more information on these configuration options, please see the &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/">server reference&lt;/a>.
&lt;/div>
&lt;h2 id="drivers">Drivers&lt;/h2>
&lt;p>The following drivers are available to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>github&lt;/code>&lt;/td>
&lt;td style="text-align: left">uses a GitHub or GitHug Enterprise Server for the SCM&lt;/td>
&lt;td style="text-align: left">&lt;a href="https://github.com/about/">https://github.com/about/&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="github">GitHub&lt;/h3>
&lt;p>From the &lt;a href="https://github.com/about/">GitHub official website&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>GitHub is where the world builds software. Millions of developers and companies build, ship, and maintain their software on GitHub—the largest and most advanced development platform in the world.&lt;/p>
&lt;/blockquote>
&lt;p>The below configuration displays an example of creating a &lt;a href="https://docs.github.com/developers/apps/building-oauth-apps/creating-an-oauth-app">GitHub OAuth application&lt;/a>:&lt;/p>
&lt;p>&lt;img src="https://go-vela.github.io/docs/docs/installation/server/github_oauth.png" alt="OAuth Application">&lt;/p>
&lt;div class="alert alert-secondary" role="alert">
&lt;h4 class="alert-heading">Warning:&lt;/h4>
&lt;p>The &lt;code>Homepage URL&lt;/code> should match &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/#vela_addr">the &lt;code>VELA_ADDR&lt;/code> environment variable&lt;/a> provided to the server for clusters without a UI.&lt;/p>
&lt;p>Otherwise, the &lt;code>Homepage URL&lt;/code> should match &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/#vela_webui_addr">the &lt;code>VELA_WEBUI_ADDR&lt;/code> environment variable&lt;/a> provided to the server.&lt;/p>
&lt;p>The &lt;code>Authorization callback URL&lt;/code> should contain &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/#vela_addr">the &lt;code>VELA_ADDR&lt;/code> environment variable&lt;/a> with a &lt;code>/authenticate&lt;/code> suffix.&lt;/p>
&lt;/div>
&lt;h3 id="github-enterprise-server">GitHub Enterprise Server&lt;/h3>
&lt;p>From the &lt;a href="https://docs.github.com/en/enterprise-server/admin/overview/system-overview">GitHub Enterprise official website&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>GitHub Enterprise Server is your organization&amp;rsquo;s private copy of GitHub contained within a virtual appliance, hosted on premises or in the cloud, that you configure and control.&lt;/p>
&lt;/blockquote>
&lt;p>The below configuration displays an example of creating a &lt;a href="https://docs.github.com/enterprise-server@3.3/developers/apps/building-oauth-apps/creating-an-oauth-app">GitHub Enterprise Server OAuth application&lt;/a>:&lt;/p>
&lt;p>&lt;img src="https://go-vela.github.io/docs/docs/installation/server/github_enterprise_oauth.png" alt="OAuth Application">&lt;/p>
&lt;div class="alert alert-secondary" role="alert">
&lt;h4 class="alert-heading">Warning:&lt;/h4>
&lt;p>The &lt;code>Homepage URL&lt;/code> should match &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/#vela_addr">the &lt;code>VELA_ADDR&lt;/code> environment variable&lt;/a> provided to the server for clusters without a UI.&lt;/p>
&lt;p>Otherwise, the &lt;code>Homepage URL&lt;/code> should match &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/#vela_webui_addr">the &lt;code>VELA_WEBUI_ADDR&lt;/code> environment variable&lt;/a> provided to the server.&lt;/p>
&lt;p>The &lt;code>Authorization callback URL&lt;/code> should contain &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/#vela_addr">the &lt;code>VELA_ADDR&lt;/code> environment variable&lt;/a> with a &lt;code>/authenticate&lt;/code> suffix.&lt;/p>
&lt;/div></description></item><item><title>Installation: Token Manager</title><link>https://go-vela.github.io/docs/installation/server/reference/token_manager/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://go-vela.github.io/docs/installation/server/reference/token_manager/</guid><description>
&lt;p>This component is responsible for generating and validating JWT tokens shared between the Vela server, workers, and users based off the configuration provided.&lt;/p>
&lt;p>The token manager is designed to ensure secure interactions with the server and protect build resources.&lt;/p>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>The following options are used to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Required&lt;/th>
&lt;th style="text-align: left">Default&lt;/th>
&lt;th style="text-align: left">Environment Variables&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>vela-server-private-key&lt;/code>&lt;/td>
&lt;td style="text-align: left">private key used for signing and validating all JWT tokens&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_SERVER_PRIVATE_KEY&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>user-access-token-duration&lt;/code>&lt;/td>
&lt;td style="text-align: left">maximum duration of time a Vela access token for a user is valid on the server&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>15m&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_USER_ACCESS_TOKEN_DURATION&lt;/code>&lt;br>&lt;code>USER_ACCESS_TOKEN_DURATION&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>user-refresh-token-duration&lt;/code>&lt;/td>
&lt;td style="text-align: left">maximum duration of time a Vela refresh token for a user is valid on the server&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>8h&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_USER_ACCESS_TOKEN_DURATION&lt;/code>&lt;br>&lt;code>USER_ACCESS_TOKEN_DURATION&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>build-token-buffer-duration&lt;/code>&lt;/td>
&lt;td style="text-align: left">maximum duration of time a Vela build token for a build extends beyond the repo build limit to maintain validity on the server&lt;/td>
&lt;td style="text-align: left">&lt;code>true&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>5m&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_BUILD_TOKEN_BUFFER_DURATION&lt;/code>&lt;br>&lt;code>BUILD_TOKEN_BUFFER_DURATION&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>worker-auth-token-duration&lt;/code>&lt;/td>
&lt;td style="text-align: left">maximum duration of time an auth token for a worker is valid on the server&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>*&lt;/td>
&lt;td style="text-align: left">&lt;code>20m&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_WORKER_AUTH_TOKEN_DURATION&lt;/code>&lt;br>&lt;code>WORKER_AUTH_TOKEN_DURATION&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>worker-register-token-duration&lt;/code>&lt;/td>
&lt;td style="text-align: left">maximum duration of time a registration token for a worker is valid on the server&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>*&lt;/td>
&lt;td style="text-align: left">&lt;code>1m&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_WORKER_REGISTER_TOKEN_DURATION&lt;/code>&lt;br>&lt;code>WORKER_REGISTER_TOKEN_DURATION&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Notes:&lt;/h4>
&lt;p>* &lt;code>worker-auth-token-duration&lt;/code> and &lt;code>worker-register-token-duration&lt;/code> are required if you intend to register workers.&lt;/p>
&lt;p>For more information on these configuration options, please see the &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/">server reference&lt;/a>.&lt;/p>
&lt;/div></description></item><item><title>Installation: Tracing</title><link>https://go-vela.github.io/docs/installation/server/reference/tracing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://go-vela.github.io/docs/installation/server/reference/tracing/</guid><description>
&lt;p>This component is responsible for instrumenting &lt;a href="https://opentelemetry.io/docs/concepts/signals/traces/">OpenTelemetry traces&lt;/a> based off the configuration provided.&lt;/p>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>The following options are used to configure the component:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Name&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;th style="text-align: left">Required&lt;/th>
&lt;th style="text-align: left">Default&lt;/th>
&lt;th style="text-align: left">Environment Variables&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.enable&lt;/code>&lt;/td>
&lt;td style="text-align: left">This variable enables &lt;a href="https://opentelemetry.io/docs/concepts/signals/traces/">OpenTelemetry tracing&lt;/a> for the Vela server. You must provide &lt;code>VELA_OTEL_EXPORTER_OTLP_ENDPOINT&lt;/code> &lt;strong>when tracing is enabled&lt;/strong>.&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_TRACING_ENABLE&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.service.name&lt;/code>&lt;/td>
&lt;td style="text-align: left">This variable sets the &lt;a href="https://opentelemetry.io/docs/languages/sdk-configuration/general/">service name&lt;/a> applied to &lt;a href="https://opentelemetry.io/docs/concepts/signals/traces/">traces&lt;/a>.&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>vela-server&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_TRACING_SERVICE_NAME&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.exporter.endpoint&lt;/code>&lt;/td>
&lt;td style="text-align: left">This variable sets the &lt;a href="https://opentelemetry.io/docs/languages/sdk-configuration/otlp-exporter/">OTel exporter&lt;/a> endpoint (ex. scheme://host:port).&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_EXPORTER_OTLP_ENDPOINT&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.exporter.cert_path&lt;/code>&lt;/td>
&lt;td style="text-align: left">This variable sets the path to certs used for communicating with the &lt;a href="https://opentelemetry.io/docs/specs/OTel/protocol/exporter/">OTel exporter&lt;/a>. If nothing is provided the server will use insecure communication.&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_TRACING_EXPORTER_SSL_CERT_PATH&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.exporter.tls-min-version&lt;/code>&lt;/td>
&lt;td style="text-align: left">This optional variable sets a TLS minimum version used when exporting traces to the &lt;a href="https://opentelemetry.io/docs/specs/OTel/protocol/exporter/">OTel exporter&lt;/a>.&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>1.2&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_TRACING_TLS_MIN_VERSION&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.sampler.persecond&lt;/code>&lt;/td>
&lt;td style="text-align: left">This variable sets OTel &lt;a href="https://opentelemetry.io/docs/concepts/sampling/">tracing head-sampler&lt;/a> rate-limiting to N per second.&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>100&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_TRACING_SAMPLER_RATELIMIT_PER_SECOND&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.sampler.tasks&lt;/code>&lt;/td>
&lt;td style="text-align: left">This variable sets an (optional) filepath to the OTel tracing head-sampler configurations json to alter how certain tasks (API endpoints, queries, etc) are sampled.&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_TRACING_SAMPLER_TASKS_CONFIG_FILEPATH&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.resource.attributes&lt;/code>&lt;/td>
&lt;td style="text-align: left">This variable sets OTel resource &lt;a href="https://opentelemetry.io/docs/languages/go/instrumentation/#span-attributes">(span) attributes&lt;/a> as a list of &lt;code>key=value&lt;/code> pairs. each one will be attached to each span as a &amp;lsquo;process&amp;rsquo; attribute.&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_TRACING_RESOURCE_ATTRIBUTES&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.resource.env_attributes&lt;/code>&lt;/td>
&lt;td style="text-align: left">This variable sets OTel resource &lt;a href="https://opentelemetry.io/docs/languages/go/instrumentation/#span-attributes">(span) attributes&lt;/a> as a list of &lt;code>key=env_variable_key&lt;/code> pairs. each one will be attached to each &lt;a href="https://opentelemetry.io/docs/languages/go/instrumentation/#span-attributes">span&lt;/a> as a &amp;lsquo;process&amp;rsquo; attribute where the value is retrieved from the environment using the pair value.&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_TRACING_RESOURCE_ENV_ATTRIBUTES&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.span.attributes&lt;/code>&lt;/td>
&lt;td style="text-align: left">This variable sets trace &lt;a href="https://opentelemetry.io/docs/languages/go/instrumentation/#span-attributes">span attributes&lt;/a> as a list of &lt;code>key=value&lt;/code> pairs. Each pair will be attached to each &lt;a href="https://opentelemetry.io/docs/languages/go/instrumentation/#span-attributes">span&lt;/a> as a &amp;rsquo;tag&amp;rsquo; attribute.&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_TRACING_SPAN_ATTRIBUTES&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>tracing.tracestate.attributes&lt;/code>&lt;/td>
&lt;td style="text-align: left">This variable sets OTel tracestate &lt;a href="https://www.w3.org/TR/trace-context">(span) attributes&lt;/a> as a list of &lt;code>key=value&lt;/code> pairs. Each pair will be inserted into the tracestate for each sampled span.&lt;/td>
&lt;td style="text-align: left">&lt;code>false&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>N/A&lt;/code>&lt;/td>
&lt;td style="text-align: left">&lt;code>VELA_OTEL_TRACING_TRACESTATE_ATTRIBUTES&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note:&lt;/h4>
For more information on how the runtime properties are consumed, please see the &lt;a href="https://go-vela.github.io/docs/docs/installation/server/reference/">server reference&lt;/a>.
&lt;/div>
&lt;h2 id="exporter">Exporter&lt;/h2>
&lt;p>To start using tracing you first need to set &lt;code>VELA_OTEL_TRACING_ENABLE=true&lt;/code> in the runtime environment.&lt;/p>
&lt;p>Enabling tracing requires that &lt;code>VELA_OTEL_EXPORTER_OTLP_ENDPOINT&lt;/code> be set to an &lt;a href="https://opentelemetry.io/docs/specs/OTel/protocol/exporter/">exporter&lt;/a> host that is reachable over HTTP.&lt;/p>
&lt;p>If the exporter requires SSL then &lt;code>VELA_OTEL_TRACING_EXPORTER_SSL_CERT_PATH&lt;/code> must be set to a filepath that contains valid certificates. If no certificate filepath is set, then the server will communicate with the exporter over HTTP (insecure).&lt;/p>
&lt;p>The Vela local stack is configured to export traces to Jaeger using their &amp;ldquo;all-in-one&amp;rdquo; Docker image, making it easy to view traces out of the box.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-diff" data-lang="diff">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ jaeger:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ image: jaegertracing/all-in-one:latest
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">&lt;/span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ docker run \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --detach=true \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --env=VELA_ADDR=https://vela-server.example.com \
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_OTEL_TRACING_ENABLE: true \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">+ --env=VELA_OTEL_EXPORTER_OTLP_ENDPOINT: http://jaeger:4318 \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a000">&lt;/span>...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>From the &lt;a href="https://www.jaegertracing.io/docs/1.6/getting-started/">Jaeger official website&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>This image, designed for quick local testing, launches the Jaeger UI, collector, query, and agent, with an in memory storage component.&lt;/p>
&lt;/blockquote>
&lt;h2 id="sampling">Sampling&lt;/h2>
&lt;p>The server uses a combination of &amp;ldquo;shared&amp;rdquo; and &amp;ldquo;per-task&amp;rdquo; &lt;a href="https://opentelemetry.io/docs/concepts/sampling/">head sampling&lt;/a> to control how traces are recorded or dropped.&lt;/p>
&lt;h3 id="shared-samplers">&amp;ldquo;Shared&amp;rdquo; Samplers&lt;/h3>
&lt;p>The following samplers are utilized by all traces produced by the server.&lt;/p>
&lt;h4 id="global-rate-limiting">Global Rate-limiting&lt;/h4>
&lt;p>All traces share a global rate limit controlled by &lt;code>VELA_OTEL_TRACING_SAMPLER_RATELIMIT_PER_SECOND&lt;/code>.&lt;/p>
&lt;p>Use &lt;code>VELA_OTEL_TRACING_SAMPLER_RATELIMIT_PER_SECOND&lt;/code> to set a maximum threshold of &amp;ldquo;N traces per second&amp;rdquo;. The default is &lt;code>100&lt;/code> traces per second.&lt;/p>
&lt;h3 id="task-samplers">&amp;ldquo;Task&amp;rdquo; Samplers&lt;/h3>
&lt;p>Set &lt;code>VELA_OTEL_TRACING_SAMPLER_TASKS_CONFIG_FILEPATH&lt;/code> to point to a JSON filepath to control sampler configurations on a per-task basis.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">tracing.json&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;task-name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;active&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#a40000">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>A &lt;code>task&lt;/code> is basically the &amp;ldquo;span name&amp;rdquo; based on the work being performed. A &lt;code>task&lt;/code> can be an API endpoint interaction, a &lt;a href="https://gorm.io/docs/index.html">Gorm&lt;/a> query, etc. See &lt;a href="https://opentelemetry.io/docs/specs/otel/trace/api/#span">OTel span docs&lt;/a> for more information.&lt;/p>
&lt;p>If a &lt;code>task&lt;/code> is &lt;strong>not&lt;/strong> represented in the configuration file then the task will be treated normally, &lt;strong>with tracing enabled&lt;/strong> using the &amp;ldquo;shared&amp;rdquo; samplers.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Field&lt;/th>
&lt;th style="text-align: left">Type&lt;/th>
&lt;th style="text-align: left">Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>active&lt;/code>&lt;/td>
&lt;td style="text-align: left">bool&lt;/td>
&lt;td style="text-align: left">Set to &lt;code>false&lt;/code> to completely disable traces for a particular task.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Examples of trace tasks include API endpoints, gorm queries, etc. The list of tasks will change as functionality is added to the server.&lt;/p>
&lt;blockquote>
&lt;p>See the configuration file examples below.&lt;/p>
&lt;/blockquote>
&lt;h4 id="example---no-tasks">Example - No Tasks&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Because tasks that do not exist in the configuration file will be treated as enabled, this file will &lt;strong>enable all tracing&lt;/strong>.&lt;/p>
&lt;h4 id="example---disable-health-endpoint">Example - Disable /health Endpoint&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;/health&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;active&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Because &lt;code>active&lt;/code> can be used to disable tracing, this configuration file will enable tracing for all tasks &lt;strong>except for the &lt;code>/health&lt;/code> endpoint&lt;/strong>.&lt;/p>
&lt;h4 id="example---mixed-tasks">Example - Mixed Tasks&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;/health&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;active&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;/api/v1/deployments/:org/:repo&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;active&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;/api/v1/:worker&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;active&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;gorm.query&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;active&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The task &lt;code>/health&lt;/code> with &lt;code>active: false&lt;/code> will &lt;strong>disable&lt;/strong> tracing on &lt;code>/health&lt;/code>.&lt;/p>
&lt;p>&lt;code>/api/v1/deployments/:org/:repo&lt;/code> with &lt;code>active: false&lt;/code> will &lt;strong>disable&lt;/strong> tracing on &lt;code>/api/v1/deployments/:org/:repo&lt;/code> for &lt;strong>ALL&lt;/strong> &lt;code>:org&lt;/code> and &lt;code>:repo&lt;/code> parameters.&lt;/p>
&lt;p>&lt;code>/api/v1/:worker&lt;/code> with &lt;code>active: true&lt;/code> &lt;strong>will do nothing&lt;/strong> at this point, because any tasks that are not present in the configuration file will automatically be sampled normally. For now this is slightly confusing, but in the future there will be more configuration fields that will determine how an &lt;code>active: true&lt;/code> task is sampled.&lt;/p>
&lt;p>The task &lt;code>gorm.query&lt;/code> with &lt;code>active: false&lt;/code> would disable tracing for raw gorm queries. This is meant to show that the config applies to &lt;strong>all trace tasks&lt;/strong> and not just API endpoints.&lt;/p>
&lt;p>&lt;strong>All other tasks&lt;/strong> will be sampled as normal using the global shared samplers (like rate limiting)! This includes all API endpoints and gorm queries.&lt;/p></description></item></channel></rss>